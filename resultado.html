<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Resultado - Simulador de Layouts</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
      /* adaptações para a página de resultado */
      #resultado-canvas { min-height: 420px; border: 1px solid rgba(0,0,0,0.06); padding: 12px; background: #fff; }

      /* faz com que as duas colunas tenham altura igual em telas grandes */
      @media (min-width: 992px) {
        .row-eq > [class*='col-'] { display: flex; }
        .card.h-100 { display: flex; flex-direction: column; width: 100%; }
        #resultado-canvas { flex: 1 1 auto; }
      }

      /* pequena melhora no overflow do canvas */
      #resultado-canvas .prototype-page { 
        max-width: 100%;
        margin: 0;            /* remove centragem automatico */
        padding: 0;           /* remove padding extra da página protótipo */
        box-shadow: none;     /* remove sombra que cria "efeito de bloco" */
        background: transparent; /* deixa o canvas controlar o fundo */
      }

      /* Remove espaçamento extra entre blocos para que ocupem toda a largura */
      #resultado-canvas .prototype-block {
        margin: 0;            /* remove margin-top / margin-bottom extras */
        border-radius: 0;     /* opcional: remove arredondamento se preferir */
        padding: 0;           /* deixa o conteúdo interno controlar espaçamento */
        box-shadow: none;     /* remove sombra local se houver */
        width: 100%;
      }

      /* Caso os componentes internos precisem de algum espaçamento, use o seletor interno */
      #resultado-canvas .prototype-block > * {
        width: 100%;
      }

      .feedback-list { max-height: 260px; overflow: auto; }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="index.html">Simulador de Layouts</a>
      </div>
    </nav>

    <main class="container py-4">
      <div class="row g-4 row-eq">
        <!-- ESQUERDA: site montado (canvas) -->
        <div class="col-12 col-lg-8">
          <div class="card shadow-sm h-100">
            <div class="card-body d-flex flex-column">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <div>
                  <h5 class="mb-0">Site montado</h5>
                  <small class="text-muted">Visualização do layout final</small>
                </div>
                <div class="small text-muted">Preview</div>
              </div>

              <div id="resultado-canvas" class="mb-3"></div>

              <div class="mt-2">
                <small class="text-muted">Use "Encerrar" no painel à direita para voltar ao início.</small>
              </div>
            </div>
          </div>
        </div>

        <!-- DIREITA: resumo / resultado da avaliação / feedback / persona -->
        <div class="col-12 col-lg-4">
          <div class="card shadow-sm h-100">
            <div class="card-body d-flex flex-column">
              <div class="d-flex justify-content-between align-items-start mb-3">
                <div>
                  <h5 class="mb-0">Resultado da Avaliação</h5>
                  <small class="text-muted">Resumo e feedback</small>
                </div>
                <div class="text-end">
                  <div class="h4 mb-0" id="pontuacao">0</div>
                  <small class="text-muted">pontuação</small>
                </div>
              </div>

              <div class="mb-2">
                <div class="small text-muted">Persona</div>
                <div class="fw-semibold" id="resultado-persona">—</div>
                <div class="small text-muted">Preferência</div>
                <div id="resultado-prefer" class="small">—</div>
              </div>

              <hr>

              <h6 class="mb-2 small">Feedback</h6>
              <ul id="lista-feedback" class="mb-3 small feedback-list"></ul>

              <details id="ordem-details" class="mb-3">
                <summary class="small">Detalhes da avaliação de ordem</summary>
                <!-- preenchido via JS -->
              </details>

              <div class="mt-auto d-flex gap-2">
                <a href="editor.html" class="btn btn-outline-secondary btn-sm">Voltar ao Editor</a>
                <button id="btn-encerrar" class="btn btn-primary btn-sm">Encerrar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script src="js/componentes.js"></script>
    <script src="js/componentes-extra.js"></script>
    <script src="js/avaliacao.js"></script>
    <script>
      document.getElementById('btn-encerrar')?.addEventListener('click', () => {
        // volta para a página inicial
        window.location.href = 'index.html';
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>